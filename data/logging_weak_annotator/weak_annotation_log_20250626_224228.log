2025-06-26 22:42:28,306 - INFO - Logging initialized for Weak Annotator.
2025-06-26 22:42:28,306 - INFO - Log file: ../../data/logging_weak_annotator/weak_annotation_log_20250626_224228.log
2025-06-26 22:42:28,635 - INFO - Available Gemini models supporting 'generateContent':
2025-06-26 22:42:28,635 - INFO -   - models/gemini-1.0-pro-vision-latest
2025-06-26 22:42:28,635 - INFO -   - models/gemini-pro-vision
2025-06-26 22:42:28,635 - INFO -   - models/gemini-1.5-pro-latest
2025-06-26 22:42:28,635 - INFO -   - models/gemini-1.5-pro-002
2025-06-26 22:42:28,635 - INFO -   - models/gemini-1.5-pro
2025-06-26 22:42:28,635 - INFO -   - models/gemini-1.5-flash-latest
2025-06-26 22:42:28,635 - INFO -   - models/gemini-1.5-flash
2025-06-26 22:42:28,635 - INFO -   - models/gemini-1.5-flash-002
2025-06-26 22:42:28,635 - INFO -   - models/gemini-1.5-flash-8b
2025-06-26 22:42:28,635 - INFO -   - models/gemini-1.5-flash-8b-001
2025-06-26 22:42:28,635 - INFO -   - models/gemini-1.5-flash-8b-latest
2025-06-26 22:42:28,635 - INFO -   - models/gemini-2.5-pro-preview-03-25
2025-06-26 22:42:28,635 - INFO -   - models/gemini-2.5-flash-preview-04-17
2025-06-26 22:42:28,635 - INFO -   - models/gemini-2.5-flash-preview-05-20
2025-06-26 22:42:28,635 - INFO -   - models/gemini-2.5-flash
2025-06-26 22:42:28,635 - INFO -   - models/gemini-2.5-flash-preview-04-17-thinking
2025-06-26 22:42:28,635 - INFO -   - models/gemini-2.5-flash-lite-preview-06-17
2025-06-26 22:42:28,635 - INFO -   - models/gemini-2.5-pro-preview-05-06
2025-06-26 22:42:28,635 - INFO -   - models/gemini-2.5-pro-preview-06-05
2025-06-26 22:42:28,635 - INFO -   - models/gemini-2.5-pro
2025-06-26 22:42:28,635 - INFO -   - models/gemini-2.0-flash-exp
2025-06-26 22:42:28,635 - INFO -   - models/gemini-2.0-flash
2025-06-26 22:42:28,635 - INFO -   - models/gemini-2.0-flash-001
2025-06-26 22:42:28,635 - INFO -   - models/gemini-2.0-flash-lite-001
2025-06-26 22:42:28,635 - INFO -   - models/gemini-2.0-flash-lite
2025-06-26 22:42:28,635 - INFO -   - models/gemini-2.0-flash-lite-preview-02-05
2025-06-26 22:42:28,635 - INFO -   - models/gemini-2.0-flash-lite-preview
2025-06-26 22:42:28,635 - INFO -   - models/gemini-2.0-pro-exp
2025-06-26 22:42:28,635 - INFO -   - models/gemini-2.0-pro-exp-02-05
2025-06-26 22:42:28,635 - INFO -   - models/gemini-exp-1206
2025-06-26 22:42:28,635 - INFO -   - models/gemini-2.0-flash-thinking-exp-01-21
2025-06-26 22:42:28,635 - INFO -   - models/gemini-2.0-flash-thinking-exp
2025-06-26 22:42:28,635 - INFO -   - models/gemini-2.0-flash-thinking-exp-1219
2025-06-26 22:42:28,635 - INFO -   - models/gemini-2.5-flash-preview-tts
2025-06-26 22:42:28,635 - INFO -   - models/gemini-2.5-pro-preview-tts
2025-06-26 22:42:28,635 - INFO -   - models/learnlm-2.0-flash-experimental
2025-06-26 22:42:28,635 - INFO -   - models/gemma-3-1b-it
2025-06-26 22:42:28,635 - INFO -   - models/gemma-3-4b-it
2025-06-26 22:42:28,635 - INFO -   - models/gemma-3-12b-it
2025-06-26 22:42:28,635 - INFO -   - models/gemma-3-27b-it
2025-06-26 22:42:28,635 - INFO -   - models/gemma-3n-e4b-it
2025-06-26 22:42:28,635 - INFO -   - models/gemma-3n-e2b-it
2025-06-26 22:42:28,635 - INFO - Attempting to switch from current model: None
2025-06-26 22:42:28,636 - INFO - Successfully switched LLM model to: models/gemini-2.5-flash-preview-04-17
2025-06-26 22:42:28,636 - INFO - 
--- Starting weak annotation process (Force re-annotate: False) ---
2025-06-26 22:42:28,712 - INFO - Loaded 7808 articles from the main DOI pool.
2025-06-26 22:42:28,743 - INFO - Loaded 3378 DOIs from weak annotation pool.
2025-06-26 22:42:28,747 - INFO - Found 4429 articles to process for weak annotation via LLM.
2025-06-26 22:42:28,747 - INFO - Absolute path to WEAK_ANNOTATION_POOL_FILE: /home/martinha/PycharmProjects/phd/review/data/weak_annotation_pool.jsonl
2025-06-26 22:42:28,747 - INFO - Processing (1664/7808 total in main pool): 10.1096/fba.2024-00133 - Single-cell and spatial transcriptomics: Discovery of human placental development and disease.
2025-06-26 22:42:28,747 - INFO - Attempt 1/3 for DOI 10.1096/fba.2024-00133 using 'models/gemini-2.5-flash-preview-04-17'
2025-06-26 22:42:35,214 - INFO - Successfully wrote weak annotation for DOI 10.1096/fba.2024-00133 to ../../data/weak_annotation_pool.jsonl.
2025-06-26 22:42:35,214 - INFO - Updated relevance_score for DOI 10.1096/fba.2024-00133 in main pool to: relevant
2025-06-26 22:42:40,214 - INFO - Absolute path to WEAK_ANNOTATION_POOL_FILE: /home/martinha/PycharmProjects/phd/review/data/weak_annotation_pool.jsonl
2025-06-26 22:42:40,214 - INFO - Processing (1684/7808 total in main pool): 10.1101/gad.351956.124 - Deciphering normal and cancer stem cell niches by spatial transcriptomics: opportunities and challenges.
2025-06-26 22:42:40,215 - INFO - Attempt 1/3 for DOI 10.1101/gad.351956.124 using 'models/gemini-2.5-flash-preview-04-17'
2025-06-26 22:42:40,400 - ERROR - Quota exhausted for model 'models/gemini-2.5-flash-preview-04-17' on DOI 10.1101/gad.351956.124: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 19
}
]
2025-06-26 22:42:40,401 - INFO - Attempting to switch from current model: models/gemini-2.5-flash-preview-04-17
2025-06-26 22:42:40,401 - INFO - Successfully switched LLM model to: models/gemini-2.5-flash-preview-05-20
2025-06-26 22:42:40,401 - INFO - Attempt 1/3 for DOI 10.1101/gad.351956.124 using 'models/gemini-2.5-flash-preview-05-20'
2025-06-26 22:42:40,487 - ERROR - Quota exhausted for model 'models/gemini-2.5-flash-preview-05-20' on DOI 10.1101/gad.351956.124: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 19
}
]
2025-06-26 22:42:40,488 - INFO - Attempting to switch from current model: models/gemini-2.5-flash-preview-05-20
2025-06-26 22:42:40,488 - INFO - Successfully switched LLM model to: models/gemini-2.5-flash
2025-06-26 22:42:40,488 - INFO - Attempt 1/3 for DOI 10.1101/gad.351956.124 using 'models/gemini-2.5-flash'
2025-06-26 22:42:40,584 - ERROR - Quota exhausted for model 'models/gemini-2.5-flash' on DOI 10.1101/gad.351956.124: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 19
}
]
2025-06-26 22:42:40,585 - INFO - Attempting to switch from current model: models/gemini-2.5-flash
2025-06-26 22:42:40,585 - INFO - Successfully switched LLM model to: models/gemini-2.5-flash-preview-04-17-thinking
2025-06-26 22:42:40,585 - INFO - Attempt 1/3 for DOI 10.1101/gad.351956.124 using 'models/gemini-2.5-flash-preview-04-17-thinking'
2025-06-26 22:42:40,671 - ERROR - Quota exhausted for model 'models/gemini-2.5-flash-preview-04-17-thinking' on DOI 10.1101/gad.351956.124: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 19
}
]
2025-06-26 22:42:40,671 - INFO - Attempting to switch from current model: models/gemini-2.5-flash-preview-04-17-thinking
2025-06-26 22:42:40,671 - INFO - Successfully switched LLM model to: models/gemini-2.5-flash-lite-preview-06-17
2025-06-26 22:42:40,671 - INFO - Attempt 1/3 for DOI 10.1101/gad.351956.124 using 'models/gemini-2.5-flash-lite-preview-06-17'
2025-06-26 22:42:41,574 - INFO - Successfully wrote weak annotation for DOI 10.1101/gad.351956.124 to ../../data/weak_annotation_pool.jsonl.
2025-06-26 22:42:41,574 - INFO - Updated relevance_score for DOI 10.1101/gad.351956.124 in main pool to: relevant
2025-06-26 22:42:46,574 - INFO - Absolute path to WEAK_ANNOTATION_POOL_FILE: /home/martinha/PycharmProjects/phd/review/data/weak_annotation_pool.jsonl
2025-06-26 22:42:46,575 - INFO - Processing (1699/7808 total in main pool): 10.1038/s41598-024-77469-5 - Spatially resolved gene expression profiles of fibrosing interstitial lung diseases.
2025-06-26 22:42:46,575 - INFO - Attempt 1/3 for DOI 10.1038/s41598-024-77469-5 using 'models/gemini-2.5-flash-lite-preview-06-17'
2025-06-26 22:42:46,658 - ERROR - Quota exhausted for model 'models/gemini-2.5-flash-lite-preview-06-17' on DOI 10.1038/s41598-024-77469-5: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 1000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 13
}
]
2025-06-26 22:42:46,658 - INFO - Attempting to switch from current model: models/gemini-2.5-flash-lite-preview-06-17
2025-06-26 22:42:46,658 - INFO - Successfully switched LLM model to: models/gemini-2.5-flash-preview-tts
2025-06-26 22:42:46,658 - INFO - Attempt 1/3 for DOI 10.1038/s41598-024-77469-5 using 'models/gemini-2.5-flash-preview-tts'
2025-06-26 22:42:46,924 - ERROR - LLM API call failed with 'models/gemini-2.5-flash-preview-tts' (Attempt 1/3) for DOI 10.1038/s41598-024-77469-5: 400 The requested combination of response modalities is not supported by the model. models/gemini-2.5-flash-preview-tts accepts the following combination of response modalities:
* AUDIO

2025-06-26 22:42:51,924 - INFO - Attempt 2/3 for DOI 10.1038/s41598-024-77469-5 using 'models/gemini-2.5-flash-preview-tts'
2025-06-26 22:42:52,696 - ERROR - LLM API call failed with 'models/gemini-2.5-flash-preview-tts' (Attempt 2/3) for DOI 10.1038/s41598-024-77469-5: 400 The requested combination of response modalities is not supported by the model. models/gemini-2.5-flash-preview-tts accepts the following combination of response modalities:
* AUDIO

2025-06-26 22:42:57,697 - INFO - Attempt 3/3 for DOI 10.1038/s41598-024-77469-5 using 'models/gemini-2.5-flash-preview-tts'
2025-06-26 22:42:57,767 - ERROR - Quota exhausted for model 'models/gemini-2.5-flash-preview-tts' on DOI 10.1038/s41598-024-77469-5: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash-tts"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 15
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 2
}
]
2025-06-26 22:42:57,767 - INFO - Attempting to switch from current model: models/gemini-2.5-flash-preview-tts
2025-06-26 22:42:57,767 - INFO - Successfully switched LLM model to: models/gemini-2.0-flash-exp
2025-06-26 22:42:57,767 - INFO - Attempt 1/3 for DOI 10.1038/s41598-024-77469-5 using 'models/gemini-2.0-flash-exp'
2025-06-26 22:43:00,134 - INFO - Successfully wrote weak annotation for DOI 10.1038/s41598-024-77469-5 to ../../data/weak_annotation_pool.jsonl.
2025-06-26 22:43:00,134 - INFO - Updated relevance_score for DOI 10.1038/s41598-024-77469-5 in main pool to: relevant
2025-06-26 22:43:05,134 - INFO - Absolute path to WEAK_ANNOTATION_POOL_FILE: /home/martinha/PycharmProjects/phd/review/data/weak_annotation_pool.jsonl
2025-06-26 22:43:05,134 - INFO - Processing (1727/7808 total in main pool): 10.1101/2024.10.15.618383 - Spatial proteomics of <i>Onchocerca volvulus</i> with pleomorphic neoplasms shows local and systemic dysregulation of protein expression.
2025-06-26 22:43:05,134 - INFO - Attempt 1/3 for DOI 10.1101/2024.10.15.618383 using 'models/gemini-2.0-flash-exp'
2025-06-26 22:43:05,225 - ERROR - Quota exhausted for model 'models/gemini-2.0-flash-exp' on DOI 10.1101/2024.10.15.618383: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-exp"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 50
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 54
}
]
2025-06-26 22:43:05,225 - INFO - Attempting to switch from current model: models/gemini-2.0-flash-exp
2025-06-26 22:43:05,225 - INFO - Successfully switched LLM model to: models/gemini-2.0-flash
2025-06-26 22:43:05,225 - INFO - Attempt 1/3 for DOI 10.1101/2024.10.15.618383 using 'models/gemini-2.0-flash'
2025-06-26 22:43:06,952 - INFO - Successfully wrote weak annotation for DOI 10.1101/2024.10.15.618383 to ../../data/weak_annotation_pool.jsonl.
2025-06-26 22:43:06,952 - INFO - Updated relevance_score for DOI 10.1101/2024.10.15.618383 in main pool to: relevant
2025-06-26 22:43:11,952 - INFO - Absolute path to WEAK_ANNOTATION_POOL_FILE: /home/martinha/PycharmProjects/phd/review/data/weak_annotation_pool.jsonl
2025-06-26 22:43:11,953 - INFO - Processing (1738/7808 total in main pool): 10.1016/j.celrep.2024.114876 - Spatial, transcriptomic, and epigenomic analyses link dorsal horn neurons to chronic pain genetic predisposition.
2025-06-26 22:43:11,953 - INFO - Attempt 1/3 for DOI 10.1016/j.celrep.2024.114876 using 'models/gemini-2.0-flash'
2025-06-26 22:43:12,033 - ERROR - Quota exhausted for model 'models/gemini-2.0-flash' on DOI 10.1016/j.celrep.2024.114876: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 200
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 47
}
]
2025-06-26 22:43:12,033 - INFO - Attempting to switch from current model: models/gemini-2.0-flash
2025-06-26 22:43:12,033 - INFO - Successfully switched LLM model to: models/gemini-2.0-flash-001
2025-06-26 22:43:12,033 - INFO - Attempt 1/3 for DOI 10.1016/j.celrep.2024.114876 using 'models/gemini-2.0-flash-001'
2025-06-26 22:43:12,136 - ERROR - Quota exhausted for model 'models/gemini-2.0-flash-001' on DOI 10.1016/j.celrep.2024.114876: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 200
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 47
}
]
2025-06-26 22:43:12,136 - INFO - Attempting to switch from current model: models/gemini-2.0-flash-001
2025-06-26 22:43:12,136 - INFO - Successfully switched LLM model to: models/gemini-2.0-flash-lite-001
2025-06-26 22:43:12,136 - INFO - Attempt 1/3 for DOI 10.1016/j.celrep.2024.114876 using 'models/gemini-2.0-flash-lite-001'
2025-06-26 22:43:14,839 - INFO - Successfully wrote weak annotation for DOI 10.1016/j.celrep.2024.114876 to ../../data/weak_annotation_pool.jsonl.
2025-06-26 22:43:14,839 - INFO - Updated relevance_score for DOI 10.1016/j.celrep.2024.114876 in main pool to: relevant
2025-06-26 22:43:19,839 - INFO - Absolute path to WEAK_ANNOTATION_POOL_FILE: /home/martinha/PycharmProjects/phd/review/data/weak_annotation_pool.jsonl
2025-06-26 22:43:19,840 - INFO - Processing (1747/7808 total in main pool): 10.1038/s41586-024-08008-5 - Targeting immune-fibroblast cell communication in heart failure.
2025-06-26 22:43:19,840 - INFO - Attempt 1/3 for DOI 10.1038/s41586-024-08008-5 using 'models/gemini-2.0-flash-lite-001'
2025-06-26 22:43:21,894 - INFO - Successfully wrote weak annotation for DOI 10.1038/s41586-024-08008-5 to ../../data/weak_annotation_pool.jsonl.
2025-06-26 22:43:21,895 - INFO - Updated relevance_score for DOI 10.1038/s41586-024-08008-5 in main pool to: low_relevance
2025-06-26 22:43:26,895 - INFO - Absolute path to WEAK_ANNOTATION_POOL_FILE: /home/martinha/PycharmProjects/phd/review/data/weak_annotation_pool.jsonl
2025-06-26 22:43:26,895 - INFO - Processing (1756/7808 total in main pool): 10.1097/TP.0000000000005153 - The Microscope and Beyond: Current Trends in the Characterization of Kidney Allograft Rejection From Tissue Samples.
2025-06-26 22:43:26,895 - INFO - Attempt 1/3 for DOI 10.1097/TP.0000000000005153 using 'models/gemini-2.0-flash-lite-001'
2025-06-26 22:43:26,972 - ERROR - Quota exhausted for model 'models/gemini-2.0-flash-lite-001' on DOI 10.1097/TP.0000000000005153: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 200
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 33
}
]
2025-06-26 22:43:26,972 - INFO - Attempting to switch from current model: models/gemini-2.0-flash-lite-001
2025-06-26 22:43:26,972 - INFO - Successfully switched LLM model to: models/gemini-2.0-flash-lite
2025-06-26 22:43:26,972 - INFO - Attempt 1/3 for DOI 10.1097/TP.0000000000005153 using 'models/gemini-2.0-flash-lite'
2025-06-26 22:43:27,070 - ERROR - Quota exhausted for model 'models/gemini-2.0-flash-lite' on DOI 10.1097/TP.0000000000005153: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 200
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 32
}
]
2025-06-26 22:43:27,070 - INFO - Attempting to switch from current model: models/gemini-2.0-flash-lite
2025-06-26 22:43:27,070 - INFO - Successfully switched LLM model to: models/gemini-2.0-flash-lite-preview-02-05
2025-06-26 22:43:27,070 - INFO - Attempt 1/3 for DOI 10.1097/TP.0000000000005153 using 'models/gemini-2.0-flash-lite-preview-02-05'
2025-06-26 22:43:27,144 - ERROR - Quota exhausted for model 'models/gemini-2.0-flash-lite-preview-02-05' on DOI 10.1097/TP.0000000000005153: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 200
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 32
}
]
2025-06-26 22:43:27,144 - INFO - Attempting to switch from current model: models/gemini-2.0-flash-lite-preview-02-05
2025-06-26 22:43:27,144 - INFO - Successfully switched LLM model to: models/gemini-2.0-flash-lite-preview
2025-06-26 22:43:27,144 - INFO - Attempt 1/3 for DOI 10.1097/TP.0000000000005153 using 'models/gemini-2.0-flash-lite-preview'
2025-06-26 22:43:27,253 - ERROR - Quota exhausted for model 'models/gemini-2.0-flash-lite-preview' on DOI 10.1097/TP.0000000000005153: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 200
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 32
}
]
2025-06-26 22:43:27,253 - INFO - Attempting to switch from current model: models/gemini-2.0-flash-lite-preview
2025-06-26 22:43:27,253 - INFO - Successfully switched LLM model to: models/gemini-2.0-flash-thinking-exp-01-21
2025-06-26 22:43:27,253 - INFO - Attempt 1/3 for DOI 10.1097/TP.0000000000005153 using 'models/gemini-2.0-flash-thinking-exp-01-21'
2025-06-26 22:43:27,332 - ERROR - Quota exhausted for model 'models/gemini-2.0-flash-thinking-exp-01-21' on DOI 10.1097/TP.0000000000005153: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-exp"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 50
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 32
}
]
2025-06-26 22:43:27,332 - INFO - Attempting to switch from current model: models/gemini-2.0-flash-thinking-exp-01-21
2025-06-26 22:43:27,332 - INFO - Successfully switched LLM model to: models/gemini-2.0-flash-thinking-exp
2025-06-26 22:43:27,332 - INFO - Attempt 1/3 for DOI 10.1097/TP.0000000000005153 using 'models/gemini-2.0-flash-thinking-exp'
2025-06-26 22:43:27,423 - ERROR - Quota exhausted for model 'models/gemini-2.0-flash-thinking-exp' on DOI 10.1097/TP.0000000000005153: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-exp"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 50
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 32
}
]
2025-06-26 22:43:27,423 - INFO - Attempting to switch from current model: models/gemini-2.0-flash-thinking-exp
2025-06-26 22:43:27,423 - INFO - Successfully switched LLM model to: models/gemini-2.0-flash-thinking-exp-1219
2025-06-26 22:43:27,423 - INFO - Attempt 1/3 for DOI 10.1097/TP.0000000000005153 using 'models/gemini-2.0-flash-thinking-exp-1219'
2025-06-26 22:43:27,501 - ERROR - Quota exhausted for model 'models/gemini-2.0-flash-thinking-exp-1219' on DOI 10.1097/TP.0000000000005153: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-exp"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 50
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 32
}
]
2025-06-26 22:43:27,501 - INFO - Attempting to switch from current model: models/gemini-2.0-flash-thinking-exp-1219
2025-06-26 22:43:27,501 - INFO - Successfully switched LLM model to: models/gemini-1.5-flash-latest
2025-06-26 22:43:27,501 - INFO - Attempt 1/3 for DOI 10.1097/TP.0000000000005153 using 'models/gemini-1.5-flash-latest'
2025-06-26 22:43:29,961 - INFO - Successfully wrote weak annotation for DOI 10.1097/TP.0000000000005153 to ../../data/weak_annotation_pool.jsonl.
2025-06-26 22:43:29,961 - INFO - Updated relevance_score for DOI 10.1097/TP.0000000000005153 in main pool to: relevant
2025-06-26 22:43:34,961 - INFO - Absolute path to WEAK_ANNOTATION_POOL_FILE: /home/martinha/PycharmProjects/phd/review/data/weak_annotation_pool.jsonl
2025-06-26 22:43:34,962 - INFO - Processing (1762/7808 total in main pool): 10.1038/s42003-024-07001-y - Enhancing spatial domain detection in spatial transcriptomics with EnSDD.
2025-06-26 22:43:34,962 - INFO - Attempt 1/3 for DOI 10.1038/s42003-024-07001-y using 'models/gemini-1.5-flash-latest'
2025-06-26 22:43:35,059 - ERROR - Quota exhausted for model 'models/gemini-1.5-flash-latest' on DOI 10.1038/s42003-024-07001-y: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 50
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 24
}
]
2025-06-26 22:43:35,060 - INFO - Attempting to switch from current model: models/gemini-1.5-flash-latest
2025-06-26 22:43:35,060 - INFO - Successfully switched LLM model to: models/gemini-1.5-pro-latest
2025-06-26 22:43:35,060 - INFO - Attempt 1/3 for DOI 10.1038/s42003-024-07001-y using 'models/gemini-1.5-pro-latest'
2025-06-26 22:43:35,202 - ERROR - Quota exhausted for model 'models/gemini-1.5-pro-latest' on DOI 10.1038/s42003-024-07001-y: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 24
}
]
2025-06-26 22:43:35,202 - INFO - Attempting to switch from current model: models/gemini-1.5-pro-latest
2025-06-26 22:43:35,202 - INFO - Successfully switched LLM model to: models/gemini-pro-vision
2025-06-26 22:43:35,203 - INFO - Attempt 1/3 for DOI 10.1038/s42003-024-07001-y using 'models/gemini-pro-vision'
2025-06-26 22:43:35,279 - ERROR - LLM API call failed with 'models/gemini-pro-vision' (Attempt 1/3) for DOI 10.1038/s42003-024-07001-y: 404 Gemini 1.0 Pro Vision has been deprecated on July 12, 2024. Consider switching to different model, for example gemini-1.5-flash.
2025-06-26 22:43:40,280 - INFO - Attempt 2/3 for DOI 10.1038/s42003-024-07001-y using 'models/gemini-pro-vision'
2025-06-26 22:43:40,453 - ERROR - LLM API call failed with 'models/gemini-pro-vision' (Attempt 2/3) for DOI 10.1038/s42003-024-07001-y: 404 Gemini 1.0 Pro Vision has been deprecated on July 12, 2024. Consider switching to different model, for example gemini-1.5-flash.
2025-06-26 22:43:45,453 - INFO - Attempt 3/3 for DOI 10.1038/s42003-024-07001-y using 'models/gemini-pro-vision'
2025-06-26 22:43:46,133 - ERROR - LLM API call failed with 'models/gemini-pro-vision' (Attempt 3/3) for DOI 10.1038/s42003-024-07001-y: 404 Gemini 1.0 Pro Vision has been deprecated on July 12, 2024. Consider switching to different model, for example gemini-1.5-flash.
2025-06-26 22:43:46,133 - ERROR - Max retries (3) reached for model 'models/gemini-pro-vision' due to persistent error. Adding to exhausted list and attempting to switch.
2025-06-26 22:43:46,133 - INFO - Attempting to switch from current model: models/gemini-pro-vision
2025-06-26 22:43:46,133 - CRITICAL - No more suitable LLM models available. All preferred models are exhausted or inaccessible for the current session.
2025-06-26 22:43:46,133 - CRITICAL - All available LLM models exhausted. Stopping further LLM attempts for this run.
2025-06-26 22:43:46,133 - ERROR - LLM API call returned empty response for DOI 10.1038/s42003-024-07001-y. Skipping annotation.
2025-06-26 22:43:46,133 - CRITICAL - No more LLM models available. Halting further LLM processing for this run.
2025-06-26 22:43:46,133 - INFO - Rewriting ../../data/doi_pool.jsonl with updated relevance scores.
2025-06-26 22:43:46,222 - INFO - Successfully wrote 7808 entries to ../../data/doi_pool.jsonl.
2025-06-26 22:43:46,222 - INFO - Weak annotation process complete.
2025-06-26 22:43:46,250 - INFO - Total unique DOIs weakly annotated: 3385
